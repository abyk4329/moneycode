
<!doctype html>
<html lang="he" dir="rtl">
<head>
				<meta charset="utf-8" />
				<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
			<meta name="apple-mobile-web-app-capable" content="yes">
			<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
			<meta name="theme-color" content="#FFF7E6">
				<title>מחשבון קוד הכסף</title>
			<link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
		<meta name="description" content="גלי את קוד הכסף האישי שלך על פי תאריך הלידה – מחשבון נומרולוגי בעברית, חינמי ואלגנטי.">
		<meta name="keywords" content="קוד הכסף, נומרולוגיה, מחשבון נומרולוגי, כסף, שפע, קוד אישי">
		<meta property="og:title" content="מחשבון קוד הכסף">
		<meta property="og:description" content="גלי את קוד הכסף האישי שלך – חישוב נומרולוגי מהיר וקליל בעברית.">
		<meta property="og:image" content="URL_TO_GOLDEN_PREVIEW_IMAGE">
		<meta property="og:type" content="website">
		<meta property="og:locale" content="he_IL">
	<style>
					:root{
						/* very light stone + soft gold pastel */
						--bg:#FBF9F6; /* warm stone background */
						--gold:#F3EBD0; /* very soft gold */
						--gold-deep:#E9DDB3; /* deeper soft gold */
						--fire:#1E3A5F; /* classic navy accent (replaces reddish) */
						--text:#1F1E1E; /* charcoal */
						--border:#F3EDE0; /* subtle borders */
						--muted:#6a6a6a;
						--card-radius:16px;
						--touch-min:48px;
					}

		*{box-sizing:border-box}
		html,body{height:100%;}
		body{margin:0;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;display:flex;align-items:center;justify-content:center;font-family:'Assistant',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;min-height:100svh}

		main{min-height:100svh;display:flex;align-items:center;justify-content:center;padding:calc(20px + env(safe-area-inset-top)) calc(20px + env(safe-area-inset-right)) calc(20px + env(safe-area-inset-bottom)) calc(20px + env(safe-area-inset-left));}

		.card{position:relative;overflow:visible;width:100%;max-width:800px;background:linear-gradient(180deg,#ffffff,#fffdf6);border-radius:var(--card-radius);box-shadow:0 10px 22px rgba(31,30,30,0.04);padding:26px;border:1px solid var(--border);-webkit-tap-highlight-color:transparent;text-align:center}
		.header-logo{display:none}
			.logo-bottom{display:block;margin:18px auto 4px;width:clamp(96px,14vw,160px);height:auto;opacity:0.95}
		.card > .inner{position:relative;z-index:1}
		.inner{display:grid;grid-template-columns:1fr;gap:18px}
		h1{margin:0;font-size:clamp(1.2rem,3.8vw,1.6rem);text-align:center}
		p.lead{margin:0;color:var(--muted);text-align:center;font-size:clamp(0.95rem,2.8vw,1.05rem)}
		.field{display:flex;flex-direction:column;gap:8px;align-items:center}
		label{font-weight:700;text-align:center}
		input[type=date]{appearance:none;-webkit-appearance:none;padding:12px 14px;border:1px solid var(--border);border-radius:12px;font-size:1rem;background:white;color:var(--text);width:100%;min-height:calc(var(--touch-min));}

		.controls{display:flex;gap:12px;margin-top:8px;justify-content:center}
		button{flex:1;padding:14px;border-radius:12px;border:0;font-weight:700;font-size:1rem;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;min-height:calc(var(--touch-min));}
		.btn-primary{background:linear-gradient(180deg,var(--gold),var(--gold-deep));color:var(--text);box-shadow:0 6px 16px rgba(201,171,110,0.08);transition:transform .12s ease,box-shadow .12s ease;border-radius:14px;padding:12px 16px}
		.btn-primary:hover,.btn-primary:focus{background:linear-gradient(180deg,var(--fire),var(--gold-deep));outline:0;transform:translateY(-2px);box-shadow:0 10px 24px rgba(30,58,95,0.08)}
		.btn-ghost{background:transparent;border:1px solid var(--border);color:var(--text)}
		.btn-ghost:hover,.btn-ghost:focus{background:rgba(224,179,128,0.06);border-color:var(--fire)}

		.btn-pay{background:linear-gradient(180deg,#fff3e0,#ffe6c9);color:var(--text);border:1px solid rgba(224,179,128,0.8)}
		.btn-pay:hover{background:linear-gradient(180deg,var(--fire),var(--gold-deep))}
		.result{margin-top:10px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(243,235,208,0.6),rgba(233,221,179,0.35));text-align:center;font-weight:700;color:var(--text);transition:opacity .32s cubic-bezier(.2,.9,.2,1),transform .36s cubic-bezier(.16,.84,.24,1);opacity:0;transform:translateY(8px);} 
		.result.visible{opacity:1;transform:translateY(0)}
		/* pay button reveal animation */
		#paylink{opacity:0;transform:translateY(6px);transition:opacity .34s ease,transform .34s ease}
		#paylink.show{opacity:1;transform:translateY(0)}
		/* subtle logo motion */
		.logo-bottom{transition:transform .5s ease,opacity .5s ease;opacity:.95}
		.logo-bottom:hover{transform:translateY(-3px) scale(1.02);opacity:1}
		.error-banner{display:none;padding:12px;border-radius:12px;background:#fff3e6;border:1px solid rgba(232,135,30,0.12);color:var(--text);font-weight:700;text-align:center}
		.meta{margin-top:6px;color:var(--muted);font-size:0.92rem;text-align:center}
		.interpretations{margin-top:12px;text-align:right}
		.interpretations h3{margin:8px 0 6px;text-align:center}
		.interpretations dl{display:grid;grid-template-columns:repeat(1,1fr);gap:8px}
		.interpretations dt{font-weight:700}
		.interpretations dd{margin:0 0 8px 0;color:var(--muted)}

		@media (max-width:520px){
			.card{padding:20px}
			.controls{flex-direction:column}
			button{padding:14px}
		}
	</style>

	<script>
		// generate a base64 inline SVG favicon (gold circle with subtle fire accent gradient)
		(function(){
			const svg = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64' width='64' height='64'>
				<defs>
					<radialGradient id='g' cx='35%' cy='30%' r='80%'>
						<stop offset='0%' stop-color='#D4AF37'/>
						<stop offset='70%' stop-color='#C99700'/>
						<stop offset='100%' stop-color='#E8871E' stop-opacity='0.95'/>
					</radialGradient>
				</defs>
				<circle cx='32' cy='32' r='26' fill='url(#g)' />
			</svg>`;

			try{
				const b64 = btoa(svg);
				const link = document.createElement('link');
				link.rel = 'icon';
				link.href = 'data:image/svg+xml;base64,' + b64;
				document.head.appendChild(link);
			}catch(e){
				// fallback: use utf-8 data url (URL-encoded)
				const enc = encodeURIComponent(svg).replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29');
				const link = document.createElement('link');
				link.rel = 'icon';
				link.href = 'data:image/svg+xml;utf8,' + enc;
				document.head.appendChild(link);
			}
		})();
				// link manifest for PWA
				(function(){
					const mlink = document.createElement('link');
					mlink.rel = 'manifest';
					mlink.href = 'manifest.json';
					document.head.appendChild(mlink);
				})();
	</script>
</head>
<body>
		<main>
			<section class="card" aria-labelledby="title">
				<div class="inner">
        
										<div class="inner" style="display:flex;flex-direction:column;gap:10px;align-items:center">
											<h1 id="title">מחשבון קוד הכסף</h1>
											<p class="lead">הכנס/י את תאריך הלידה כדי לחשב את קוד הכסף הנומרולוגי</p>
										</div>

				<div id="error" class="error-banner" role="alert" aria-live="assertive"></div>

				<div class="field">
					<label for="dob">תאריך לידה</label>
					<input id="dob" type="date" lang="he-IL" aria-label="תאריך לידה" />
				</div>

								<div class="controls">
																	<button id="compute" class="btn-primary">חשב/י</button>
																	<button id="clear" class="btn-ghost">ניקוי</button>
																</div>

																						<div id="output" class="result" role="status" aria-live="polite" style="display:none"></div>
																						<div style="margin-top:10px;">
																							<a id="paylink" class="btn-primary" href="#" role="button" aria-hidden="true" style="display:block;width:100%;text-decoration:none;opacity:0;transform:translateY(6px)">לקבלת פירוש</a>
																						</div>

						<div class="interpretations" id="interpretations" style="display:none">
							<h3>פירושי מספרים (1–9)</h3>
							<dl>
								<dt>1</dt><dd>ראשוניות, מנהיגות, יזמות.</dd>
								<dt>2</dt><dd>שיתוף, רגישות, תמיכה.</dd>
								<dt>3</dt><dd>יצירתיות, תקשורת, שמחה.</dd>
								<dt>4</dt><dd>יסוד, יציבות, עבודה קשה.</dd>
								<dt>5</dt><dd>חופש, שינוי, הרפתקאות.</dd>
								<dt>6</dt><dd>אחריות, בית, שירות.</dd>
								<dt>7</dt><dd>חכמה, פנימיות, רוחניות.</dd>
								<dt>8</dt><dd>שפע, כוח כלכלי, ניצחון.</dd>
								<dt>9</dt><dd>אוניברסליות, סיום, חמלה.</dd>
							</dl>
						</div>
				<div class="meta">השתמש/י בבורר התאריכים של המכשיר או הזן תאריך בפורמט yyyy-mm-dd או dd/mm/yyyy</div>
				<img src="LOGO1.png" alt="לוגו" class="logo-bottom" aria-hidden="true">
			</div>
		</section>
	</main>

	<script>
		function sumDigitsOnce(value){
			const s = String(value).replace(/\D/g,'');
			if(!s) return 0;
			return s.split('').reduce((a,b)=>a + Number(b), 0);
		}

		function digitalRoot(n){
			n = Math.abs(Number(n) || 0);
			while(n > 9){ n = String(n).split('').reduce((a,b)=>a + Number(b), 0); }
			return n;
		}

		const dob = document.getElementById('dob');
		const compute = document.getElementById('compute');
		const clearBtn = document.getElementById('clear');
		const out = document.getElementById('output');
		const err = document.getElementById('error');

		function showError(text){ err.textContent = text; err.style.display = 'block'; out.style.display = 'none'; }
		function clearError(){ err.textContent = ''; err.style.display = 'none'; }
			function showOutput(d,m,y,total){
				clearError();
				// show numbers in day month year total order inside LTR wrapper so digits read left-to-right
				out.innerHTML = `קוד הכסף שלך הוא: <span dir="ltr" style="letter-spacing:6px;font-family:monospace">${d} ${m} ${y} ${total}</span>`;
				out.style.display = 'block';
			}

		function parseDateInput(val){
			if(!val) return null;
			if(dob.valueAsDate instanceof Date && !isNaN(dob.valueAsDate)){
				const dt = dob.valueAsDate; return { day: dt.getDate(), month: dt.getMonth()+1, year: dt.getFullYear() };
			}
			const iso = /^\s*(\d{4})-(\d{1,2})-(\d{1,2})\s*$/;
			let m = val.match(iso);
			if(m) return { year: Number(m[1]), month: Number(m[2]), day: Number(m[3]) };
			const parts = val.trim().split(/[\/\.\-\s]+/);
			if(parts.length === 3){
				if(parts[0].length === 4) return { year: Number(parts[0]), month: Number(parts[1]), day: Number(parts[2]) };
				if(parts[2].length === 4) return { day: Number(parts[0]), month: Number(parts[1]), year: Number(parts[2]) };
			}
			const parsed = new Date(val);
			if(!isNaN(parsed)) return { day: parsed.getDate(), month: parsed.getMonth()+1, year: parsed.getFullYear() };
			return null;
		}

		compute.addEventListener('click', ()=>{
			clearError(); out.style.display = 'none';
			const raw = dob.value;
			if(!raw){ showError('נא לבחור תאריך לידה.'); return; }

			const parsed = parseDateInput(raw);
			if(!parsed){ showError('לא ניתן לקרוא את התאריך. השתמש/י בבורר או הזן/י yyyy-mm-dd או dd/mm/yyyy.'); return; }

			let {day, month, year} = parsed;
			const check = new Date(year, month-1, day);
			if(check.getFullYear() !== Number(year) || (check.getMonth()+1) !== Number(month) || check.getDate() !== Number(day)){
				showError('תאריך לא חוקי. בדוק/י ונסה/י שוב.'); return;
			}

			const daySum = sumDigitsOnce(day);
			const monthReduced = digitalRoot(sumDigitsOnce(month));
			const yearReduced = digitalRoot(year);
			const total = digitalRoot(daySum + monthReduced + yearReduced);

			showOutput(daySum, monthReduced, yearReduced, total);
			// reveal pay button under the result after successful calculation with animation
			const payBtn = document.getElementById('paylink');
			// ensure result animates
			out.classList.add('visible');
			out.style.display = 'block';
			payBtn.setAttribute('aria-hidden','false');
			// small timeout to allow CSS transition
			setTimeout(()=> payBtn.classList.add('show'), 30);
		});

	clearBtn.addEventListener('click', ()=>{ dob.value = ''; out.style.display = 'none'; out.classList.remove('visible'); const payBtn = document.getElementById('paylink'); payBtn.classList.remove('show'); payBtn.setAttribute('aria-hidden','true'); clearError(); dob.focus(); });
		dob.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') compute.click(); });
			// Payment flow: lead to pay.html with return URL
			const paylink = document.getElementById('paylink');
			function buildReturnUrl(){
				// include origin to ensure pay.html redirects back to the full URL (works from any path)
				return encodeURIComponent(window.location.origin + window.location.pathname + window.location.search);
			}
			paylink.addEventListener('click', (e)=>{
				e.preventDefault();
				// Redirect to pay page; it should return to this URL with ?paid=1
				const href = `pay.html?return=${buildReturnUrl()}&amount=5`;
				window.location.href = href;
			});

			// If ?paid=1 is present, reveal interpretations
			const params = new URLSearchParams(window.location.search);
				if(params.get('paid') === '1'){
					document.getElementById('interpretations').style.display = 'block';
					document.getElementById('interpretations').setAttribute('aria-hidden','false');
				}
	</script>
		<script>
			// Register a simple service worker to enable PWA install prompt in supporting browsers
			if('serviceWorker' in navigator){
				window.addEventListener('load', function(){
					navigator.serviceWorker.register('sw.js').catch(function(err){
						// fail silently
						console.info('SW registration failed:', err);
					});
				});
			}
		</script>
</body>
</html>

